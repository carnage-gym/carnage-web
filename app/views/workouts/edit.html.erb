<div class="md:container px-4 text-slate-100">
    <%= form_with model: @workout do |form| %>
      <div class="text-slate-100 flex justify-evenly">
        <div>
          <%= form.label :title, class: "font-bold" %>
          <%= form.text_field :title, class: "bg-zinc-900 rounded-2xl mb-2" %><br>

          <%= form.label :description, class: "font-bold" %>
          <%= form.text_field :description, class: "bg-zinc-900 rounded-2xl mb-2" %><br>
          <%= form.submit "Update", class: "w-full mt-2 font-bold bg-red-400 font-bold rounded-lg" %>
        </div>

        <div class="w-2/3 bg-white rounded-lg text-gray-700 p-3">
          <div class="flex justify-between mb-2">
            <p class="text-4xl font-extrabold">Exercises</p>
            <button type="button" onclick="document.getElementById('dialog').showModal();" class="text-sm p-2 font-bold bg-blue-400 text-slate-100 rounded-lg">+ Add Exercise</button>
            <%= render DialogComponent.new(title: "Add Exercise", close_button_text: "Save Changes") do |e| %>
              <%= form.collection_check_boxes :exercise_ids, Exercise.all, :id, :name, {multiple: true}, { class: " text-blue-400 bg-zinc-950" } do |f| %>
                <div class="text-slate-100 flex justify-between">
                  <p><%= f.text %></p>
                  <%= f.check_box %>
                </div>
              <% end %>
            <% end %>
          </div> 
          <% @workout.exercises.each do |ex| %>
            <%= render ExerciseViewComponent.new(exercise: ex, is_workout: true) do |b| %>
              <% if ex.exerciseType == Exercise::WEIGHT_REPS %>
                <div class="grid grid-cols-5 text-center gap-3">
                    <p>Order</p>
                    <p>Intensity</p>
                    <p>Weight (kg)</p>
                    <p>Reps</p>
                    <p></p>
                    <% ExerciseSet.where(workout_id: @workout.id, exercise_id: ex.id).each.with_index(1) do |x, index| %>
                      <%= form.fields_for :exercise_sets, x do |uform| %>
                        <%= uform.label index %>
                        <%= uform.number_field :intensity, in:1..10 %>
                        <%= uform.number_field :weight %>
                        <%= uform.number_field :reps %>
                        <button type="button" data-set-id-value="<%= x.id %>" data-action="click->workout#removeSet" class="p-1 text-slate-100 text-sm font-bold rounded-lg bg-red-400">Remove set</button>
                      <% end %>
                    <% end %>
                  </div>
                  <div class="flex gap-4 mt-3 w-full">
                    <button type="button" class="w-full text-slate-100 p-1 bg-blue-400 text-sm font-bold rounded-lg" data-action="click->workout#addSet">Add Set</button>
                  </div>
              <% end %>
            <% end %>
          <% end %>

          </div>
        </div>
      <% end %>
</div>
