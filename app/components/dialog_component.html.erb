<script>
  function closeModal() {
      const dialog = document.getElementById('dialog');
      dialog.close();
  }

  function addExercises() {
    closeModal();
    var dialog = document.getElementById('dialog');
    
    var list = document.getElementById('ex_list');
    var choices = document.getElementsByName('ex_choice');

    var i, checkbox, node, li;
    for(i = 0; i < choices.length; i++) {
      var elem = choices[i];
       // this is some of the worst code i've ever written.... but hey, it works!
      if(elem.firstChild.nextSibling.nextSibling.nextSibling.checked) {
        li = document.createElement('li');
        li.setAttribute("class", "ml-4 ")
        
        node = document.createTextNode(choices[i].firstChild.nextSibling.textContent);

        li.appendChild(node);
        ex_list.appendChild(li);
      }
    }
  }
</script>

<dialog id="dialog" class="bg-zinc-950 p-5 rounded-2xl w-1/3">
  <div class="flex justify-between">
    <p class="text-slate-100 text-3xl font-extrabold"><%= @title %></p>
    <button type="button" onclick="closeModal();" class="font-bold text-red-500">x</button>
  </div>
  <br>
  <%= content %>
  <button type="button" onclick="addExercises();" class="text-slate-100 mt-3 bg-blue-400 w-full rounded-lg"><%= @close_button_text %></button>
</dialog>
